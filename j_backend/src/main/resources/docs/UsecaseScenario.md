# UsecaseScenario.md

## 프로젝트 개요

Antock Public Data Harvester는 공공데이터 수집 및 관리 시스템으로, 회원 관리, 법인 정보 관리, 파일 관리, 대시보드 기능을 제공하는 웹 애플리케이션입니다.

## 목차

1. [사용자 인증 및 권한 관리](#1-사용자-인증-및-권한-관리)
2. [법인 정보 관리](#2-법인-정보-관리)
3. [파일 관리](#3-파일-관리)
4. [대시보드 및 통계](#4-대시보드-및-통계)
5. [관리자 기능](#5-관리자-기능)
6. [시스템 모니터링](#6-시스템-모니터링)

---

## 1. 사용자 인증 및 권한 관리

### 1.1 회원가입

#### 1.1.1 일반 사용자 회원가입

**시나리오**: 새로운 사용자가 시스템에 가입하는 과정

**액터**: 미가입 사용자

**전제조건**: 없음

**성공 시나리오**:

1. 사용자가 회원가입 페이지에 접속한다
2. 사용자가 다음 정보를 입력한다:
   - 사용자명 (4-20자, 영문+숫자+언더스코어)
   - 비밀번호 (6-50자, 영문+숫자 조합 필수)
   - 닉네임 (2-20자)
   - 이메일 주소
3. 시스템이 입력 데이터의 유효성을 검증한다
4. 시스템이 사용자명과 이메일 중복을 확인한다
5. 시스템이 비밀번호를 암호화하여 저장한다
6. 사용자 상태를 "PENDING"으로 설정한다
7. 시스템이 고유한 API 키를 생성한다
8. 회원가입 완료 메시지를 표시한다

**예외 시나리오**:

- 입력 데이터가 유효성 검증을 통과하지 못하는 경우
- 사용자명 또는 이메일이 이미 존재하는 경우
- 시스템 오류가 발생하는 경우

**후조건**: 새로운 회원이 시스템에 등록되며, 관리자 승인 대기 상태가 된다

### 1.2 로그인

#### 1.2.1 사용자 로그인

**시나리오**: 등록된 사용자가 시스템에 로그인하는 과정

**액터**: 등록된 사용자

**전제조건**:

- 사용자가 시스템에 등록되어 있음
- 계정이 승인(APPROVED) 상태임
- 계정이 잠금 상태가 아님

**성공 시나리오**:

1. 사용자가 로그인 페이지에 접속한다
2. 사용자가 사용자명과 비밀번호를 입력한다
3. 시스템이 Rate Limiting을 확인한다 (동일 IP에서 분당 5회 제한)
4. 시스템이 사용자 자격 증명을 검증한다
5. 시스템이 JWT 토큰을 생성한다
6. 로그인 실패 카운트를 0으로 초기화한다
7. 마지막 로그인 시간을 업데이트한다
8. 사용자를 메인 페이지로 리다이렉트한다

**예외 시나리오**:

- 잘못된 자격 증명: 로그인 실패 카운트 증가
- 5회 연속 실패: 계정 자동 잠금 (SUSPENDED 상태)
- Rate Limiting 초과: 30분간 IP 차단
- 계정이 승인되지 않은 상태
- 계정이 정지된 상태

**후조건**: 사용자가 인증되어 시스템에 접근할 수 있게 된다

#### 1.2.2 관리자 로그인

**시나리오**: 관리자가 시스템에 로그인하는 과정

**액터**: 시스템 관리자

**전제조건**:

- 관리자 계정이 존재함 (ADMIN 또는 MANAGER 역할)
- 계정이 활성 상태임

**성공 시나리오**:

1. 관리자가 로그인 페이지에 접속한다
2. 관리자가 사용자명과 비밀번호를 입력한다
3. 시스템이 관리자 권한을 확인한다
4. JWT 토큰에 관리자 권한을 포함하여 생성한다
5. 관리자 대시보드로 리다이렉트한다

**후조건**: 관리자가 관리 기능에 접근할 수 있게 된다

### 1.3 권한 관리

#### 1.3.1 사용자 역할 분리

**역할 체계**:

- **USER**: 일반 사용자 - 기본 조회 기능
- **MANAGER**: 관리자 - 회원 관리, 데이터 관리
- **ADMIN**: 시스템 관리자 - 모든 권한, 시스템 설정

#### 1.3.2 회원 승인 프로세스

**시나리오**: 관리자가 신규 회원을 승인하는 과정

**액터**: 관리자 (ADMIN 또는 MANAGER)

**전제조건**:

- 승인 대기 상태의 회원이 존재함
- 관리자가 로그인되어 있음

**성공 시나리오**:

1. 관리자가 승인 대기 회원 목록을 조회한다
2. 관리자가 특정 회원을 선택한다
3. 관리자가 승인 버튼을 클릭한다
4. 시스템이 회원 상태를 "APPROVED"로 변경한다
5. 승인 일시와 승인자 정보를 기록한다
6. 로그인 실패 카운트와 계정 잠금을 해제한다
7. 승인 완료 메시지를 표시한다

**대안 시나리오 - 거부**:

1. 관리자가 거부 버튼을 클릭한다
2. 시스템이 회원 상태를 "REJECTED"로 변경한다
3. 승인 관련 정보를 초기화한다

**후조건**: 회원이 시스템을 이용할 수 있게 되거나 접근이 차단된다

---

## 2. 법인 정보 관리

### 2.1 법인 정보 등록

#### 2.1.1 법인 정보 등록

**시나리오**: 사용자가 새로운 법인 정보를 등록하는 과정

**액터**: 인증된 사용자

**전제조건**:

- 사용자가 로그인되어 있음
- 사용자가 법인 정보 등록 권한을 가짐

**성공 시나리오**:

1. 사용자가 법인 정보 등록 페이지에 접속한다
2. 사용자가 다음 정보를 입력한다:
   - 판매자 ID
   - 법인명 (사업체명)
   - 사업자번호 (하이픈 포함/제외 가능)
   - 법인등록번호
   - 시/도, 구/군 정보
   - 설명 (선택사항)
3. 시스템이 입력 데이터의 유효성을 검증한다
4. 시스템이 사업자번호 중복을 확인한다
5. 시스템이 지역 정보의 유효성을 확인한다
6. 시스템이 법인 정보를 저장하고 고유 ID를 생성한다
7. 등록자 정보(username)를 기록한다
8. 등록 완료 메시지를 표시한다

**예외 시나리오**:

- 사업자번호 형식이 올바르지 않은 경우
- 사업자번호가 이미 등록된 경우
- 지역 정보가 유효하지 않은 경우
- 필수 정보가 누락된 경우

**후조건**: 새로운 법인 정보가 시스템에 등록된다

### 2.2 법인 정보 검색

#### 2.2.1 다중 조건 검색

**시나리오**: 사용자가 다양한 조건으로 법인 정보를 검색하는 과정

**액터**: 인증된 사용자

**전제조건**:

- 사용자가 로그인되어 있음
- 검색할 법인 데이터가 존재함

**성공 시나리오**:

1. 사용자가 법인 검색 페이지에 접속한다
2. 사용자가 검색 조건을 입력한다:
   - 법인명 (부분 일치)
   - 사업자번호 (정확 일치)
   - 판매자 ID (부분 일치)
   - 법인등록번호 (정확 일치)
   - 시/도 (정확 일치)
   - 구/군 (정확 일치)
3. 사용자가 정렬 옵션을 선택한다 (ID, 법인명, 생성일 등)
4. 사용자가 페이지 크기를 설정한다 (1-100개)
5. 시스템이 검색 조건을 처리하고 결과를 반환한다
6. 결과가 페이지네이션되어 표시된다
7. 각 법인 정보의 요약이 목록으로 표시된다

**대안 시나리오 - 검색 결과 없음**:

1. 시스템이 "검색 결과가 없습니다" 메시지를 표시한다
2. 검색 조건 재설정을 안내한다

**후조건**: 사용자가 원하는 법인 정보를 찾을 수 있다

#### 2.2.2 특정 조건 검색

**시나리오**: 사업자번호나 법인등록번호로 특정 법인을 검색

**성공 시나리오**:

1. 사용자가 사업자번호 또는 법인등록번호를 입력한다
2. 시스템이 해당 번호로 법인을 조회한다
3. 일치하는 법인 정보의 상세 내용을 표시한다

### 2.3 법인 정보 관리

#### 2.3.1 법인 정보 수정

**시나리오**: 등록된 법인 정보를 수정하는 과정

**액터**: 법인 등록자 또는 관리자

**전제조건**:

- 사용자가 로그인되어 있음
- 법인 정보가 존재함
- 수정 권한이 있음 (본인이 등록했거나 관리자)

**성공 시나리오**:

1. 사용자가 수정할 법인을 선택한다
2. 시스템이 현재 정보를 폼에 미리 채워서 표시한다
3. 사용자가 원하는 필드를 수정한다
4. 시스템이 수정된 데이터의 유효성을 검증한다
5. 시스템이 변경 이력을 기록한다
6. 수정된 정보를 저장하고 수정 일시를 업데이트한다
7. 수정 완료 메시지를 표시한다

**예외 시나리오**:

- 수정 권한이 없는 경우
- 다른 사용자가 동시에 수정하는 경우
- 유효성 검증 실패

**후조건**: 법인 정보가 업데이트되고 변경 이력이 기록된다

#### 2.3.2 법인 정보 삭제

**시나리오**: 등록된 법인 정보를 삭제하는 과정

**액터**: 법인 등록자 또는 관리자

**전제조건**:

- 사용자가 로그인되어 있음
- 법인 정보가 존재함
- 삭제 권한이 있음

**성공 시나리오**:

1. 사용자가 삭제할 법인을 선택한다
2. 시스템이 삭제 확인 대화상자를 표시한다
3. 사용자가 삭제를 확인한다
4. 시스템이 관련 이력 데이터를 함께 삭제한다
5. 삭제 완료 메시지를 표시한다

**후조건**: 법인 정보와 관련 데이터가 시스템에서 제거된다

### 2.4 지역 정보 관리

#### 2.4.1 지역 정보 조회

**시나리오**: 시/도 및 구/군 정보를 조회하는 과정

**성공 시나리오**:

1. 사용자가 시/도 목록을 요청한다
2. 시스템이 등록된 모든 시/도 목록을 반환한다
3. 사용자가 특정 시/도를 선택한다
4. 시스템이 해당 시/도의 구/군 목록을 반환한다

**후조건**: 사용자가 정확한 지역 정보를 선택할 수 있다

---

## 3. 파일 관리

### 3.1 파일 업로드

#### 3.1.1 파일 업로드

**시나리오**: 사용자가 파일을 시스템에 업로드하는 과정

**액터**: 인증된 사용자

**전제조건**:

- 사용자가 로그인되어 있음
- 업로드할 파일이 존재함

**성공 시나리오**:

1. 사용자가 파일 업로드 페이지에 접속한다
2. 사용자가 업로드할 파일을 선택한다
3. 사용자가 파일 설명을 입력한다 (선택사항)
4. 시스템이 파일 유효성을 검증한다:
   - 파일 크기 (최대 100MB)
   - 파일 형식
   - 악성 코드 검사
5. 시스템이 고유한 저장 파일명을 생성한다
6. 파일을 설정된 저장소에 저장한다 (Local 또는 MinIO)
7. 파일 메타데이터를 데이터베이스에 저장한다:
   - 원본 파일명
   - 저장 파일명
   - 콘텐츠 타입
   - 파일 크기
   - 업로더 정보
   - 업로드 시간
8. 업로드 완료 응답을 반환한다

**예외 시나리오**:

- 파일 크기가 제한을 초과하는 경우
- 지원하지 않는 파일 형식인 경우
- 저장소 용량이 부족한 경우
- 네트워크 오류가 발생하는 경우

**후조건**: 파일이 시스템에 안전하게 저장되고 관리된다

### 3.2 파일 조회 및 다운로드

#### 3.2.1 파일 목록 조회

**시나리오**: 사용자가 업로드된 파일 목록을 조회하는 과정

**성공 시나리오**:

1. 사용자가 파일 관리 페이지에 접속한다
2. 시스템이 페이지네이션된 파일 목록을 표시한다
3. 각 파일에 대해 다음 정보를 표시한다:
   - 파일명
   - 파일 크기
   - 업로드 날짜
   - 업로더
   - 설명
4. 사용자가 정렬 및 필터링을 적용할 수 있다

#### 3.2.2 파일 다운로드

**시나리오**: 사용자가 저장된 파일을 다운로드하는 과정

**전제조건**:

- 파일이 시스템에 존재함
- 사용자가 다운로드 권한을 가짐

**성공 시나리오**:

1. 사용자가 다운로드할 파일을 선택한다
2. 시스템이 파일 존재 여부를 확인한다
3. 시스템이 사용자의 다운로드 권한을 확인한다
4. 시스템이 파일을 스트림으로 전송한다
5. 브라우저가 파일 다운로드를 시작한다

### 3.3 파일 관리

#### 3.3.1 파일 정보 수정

**시나리오**: 파일의 설명이나 메타데이터를 수정하는 과정

**전제조건**:

- 파일이 존재함
- 사용자가 파일 소유자이거나 관리자임

**성공 시나리오**:

1. 사용자가 수정할 파일을 선택한다
2. 시스템이 현재 파일 정보를 표시한다
3. 사용자가 설명을 수정한다
4. 시스템이 변경사항을 저장한다
5. 마지막 수정 시간을 업데이트한다

#### 3.3.2 파일 삭제

**시나리오**: 불필요한 파일을 시스템에서 제거하는 과정

**전제조건**:

- 파일이 존재함
- 사용자가 삭제 권한을 가짐

**성공 시나리오**:

1. 사용자가 삭제할 파일을 선택한다
2. 시스템이 삭제 확인을 요청한다
3. 사용자가 삭제를 확인한다
4. 시스템이 물리적 파일을 삭제한다
5. 데이터베이스에서 파일 정보를 제거한다
6. 삭제 완료 메시지를 표시한다

### 3.4 파일 검색

#### 3.4.1 파일 검색

**시나리오**: 키워드로 파일을 검색하는 과정

**성공 시나리오**:

1. 사용자가 검색 키워드를 입력한다
2. 시스템이 파일명과 설명에서 키워드를 검색한다
3. 일치하는 파일 목록을 반환한다
4. 검색 결과를 관련성 순으로 정렬한다

---

## 4. 대시보드 및 통계

### 4.1 지역별 통계

#### 4.1.1 지역별 법인 통계 조회

**시나리오**: 지역별 법인 분포 현황을 조회하는 과정

**액터**: 인증된 사용자

**성공 시나리오**:

1. 사용자가 대시보드에 접속한다
2. 시스템이 지역별 법인 수를 집계한다
3. 다음 통계를 표시한다:
   - 시/도별 총 법인 수
   - 구/군별 법인 수
   - 유효한 법인등록번호를 가진 법인 수
   - 유효한 지역코드를 가진 법인 수
   - 데이터 완성도 (completionRate)
4. 통계를 차트와 표 형태로 시각화한다

#### 4.1.2 최상위 지역 통계 조회

**시나리오**: 가장 많은 법인이 등록된 지역 정보를 조회

**성공 시나리오**:

1. 시스템이 모든 지역의 법인 수를 비교한다
2. 가장 많은 법인이 등록된 지역을 반환한다
3. 해당 지역의 상세 통계를 표시한다

### 4.2 최근 활동 내역

#### 4.2.1 최근 활동 조회

**시나리오**: 시스템의 최근 활동 내역을 조회하는 과정

**성공 시나리오**:

1. 시스템이 최근 활동을 집계한다:
   - 신규 회원 가입
   - 법인 정보 등록/수정
   - 파일 업로드/다운로드
2. 시간순으로 정렬하여 표시한다
3. 활동 유형별로 분류하여 표시한다

---

## 5. 관리자 기능

### 5.1 회원 관리

#### 5.1.1 회원 목록 관리

**시나리오**: 관리자가 전체 회원을 관리하는 과정

**액터**: 관리자 (ADMIN 또는 MANAGER)

**성공 시나리오**:

1. 관리자가 회원 관리 페이지에 접속한다
2. 시스템이 회원 목록을 표시한다:
   - 기본 정보 (사용자명, 닉네임, 이메일)
   - 상태 (PENDING, APPROVED, REJECTED, SUSPENDED, WITHDRAWN)
   - 역할 (USER, MANAGER, ADMIN)
   - 가입일, 마지막 로그인
3. 관리자가 필터링을 적용할 수 있다:
   - 상태별 필터
   - 역할별 필터
   - 기간별 필터
4. 각 회원에 대해 관리 작업을 수행할 수 있다

#### 5.1.2 회원 상태 관리

**시나리오**: 관리자가 회원의 상태를 변경하는 과정

**전제조건**:

- 관리자가 로그인되어 있음
- 관리할 회원이 존재함

**성공 시나리오 - 승인**:

1. 관리자가 승인할 회원을 선택한다
2. "승인" 버튼을 클릭한다
3. 시스템이 회원 상태를 APPROVED로 변경한다
4. 승인자와 승인 시간을 기록한다

**성공 시나리오 - 정지**:

1. 관리자가 정지할 회원을 선택한다
2. "정지" 버튼을 클릭한다
3. 시스템이 회원 상태를 SUSPENDED로 변경한다
4. 계정 잠금 시간을 기록한다

**성공 시나리오 - 역할 변경**:

1. 관리자가 역할을 변경할 회원을 선택한다
2. 새로운 역할을 선택한다
3. 시스템이 회원의 역할을 업데이트한다

### 5.2 데이터 관리

#### 5.2.1 회원 데이터 통계

**시나리오**: 관리자가 회원 데이터 현황을 파악하는 과정

**성공 시나리오**:

1. 관리자가 데이터 관리 페이지에 접속한다
2. 시스템이 다음 통계를 표시한다:
   - 역할별 회원 수 (ADMIN, MANAGER, USER)
   - 상태별 회원 수 (PENDING, APPROVED, etc.)
   - 상세 통계 (역할별 상태 분포)
3. 통계를 시각적으로 표현한다

#### 5.2.2 더미 데이터 생성

**시나리오**: 개발/테스트 환경에서 더미 회원 데이터를 생성하는 과정

**액터**: 시스템 관리자

**전제조건**:

- 개발/테스트 환경
- ADMIN 권한

**성공 시나리오**:

1. 관리자가 데이터 생성 기능에 접속한다
2. 생성할 회원 수를 입력한다 (기본 1000명)
3. 시스템이 다음 비율로 더미 데이터를 생성한다:
   - 역할별: ADMIN(5%), MANAGER(15%), USER(80%)
   - 상태별: APPROVED(70%), PENDING(15%), SUSPENDED(10%), REJECTED(5%)
4. 배치 단위로 데이터베이스에 저장한다
5. 생성 완료 보고서를 표시한다

### 5.3 법인 데이터 모니터링

#### 5.3.1 법인 정보 승인 관리

**시나리오**: 관리자가 등록된 법인 정보를 검토하고 승인하는 과정

**성공 시나리오**:

1. 관리자가 법인 관리 페이지에 접속한다
2. 시스템이 승인 대기 중인 법인 목록을 표시한다
3. 관리자가 각 법인 정보를 검토한다
4. 문제가 없는 경우 승인 처리한다
5. 문제가 있는 경우 거부하고 사유를 기록한다

---

## 6. 시스템 모니터링

### 6.1 시스템 메트릭

#### 6.1.1 시스템 상태 모니터링

**시나리오**: 관리자가 시스템의 전반적인 상태를 모니터링하는 과정

**액터**: 시스템 관리자

**성공 시나리오**:

1. 관리자가 시스템 메트릭 페이지에 접속한다
2. 시스템이 다음 정보를 표시한다:
   - 시스템 가동 시간
   - 메모리 사용량
   - 캐시 성능 지표
   - Rate Limiting 현황
   - 보안 개요
3. 각 지표를 실시간으로 업데이트한다

### 6.2 캐시 관리

#### 6.2.1 캐시 모니터링

**시나리오**: 관리자가 캐시 시스템을 모니터링하고 관리하는 과정

**성공 시나리오**:

1. 관리자가 캐시 관리 페이지에 접속한다
2. 시스템이 캐시 통계를 표시한다:
   - 캐시 가용성
   - 총 요청 수
   - 캐시 히트/미스 수
   - 히트율
   - 오류 수
3. 관리자가 캐시 관리 작업을 수행할 수 있다:
   - 전체 캐시 삭제
   - 특정 회원 캐시 삭제
   - 캐시 갱신

#### 6.2.2 Rate Limiting 관리

**시나리오**: 관리자가 Rate Limiting 시스템을 관리하는 과정

**성공 시나리오**:

1. 관리자가 Rate Limit 관리 페이지에 접속한다
2. 현재 Rate Limit 상태를 조회한다
3. 특정 식별자의 제한을 초기화할 수 있다
4. 화이트리스트를 관리할 수 있다:
   - 화이트리스트 추가
   - 화이트리스트 제거
5. 차단된 식별자를 관리할 수 있다:
   - 수동 차단
   - 차단 해제

### 6.3 헬스체크

#### 6.3.1 시스템 헬스체크

**시나리오**: 시스템의 각 구성요소 상태를 확인하는 과정

**성공 시나리오**:

1. 헬스체크 엔드포인트에 요청이 들어온다
2. 시스템이 각 구성요소를 검사한다:
   - 데이터베이스 연결
   - Redis 연결 (있는 경우)
   - 캐시 시스템
   - 외부 API 연결
3. 각 구성요소의 상태를 반환한다
4. 전체 시스템 상태를 종합하여 응답한다

---

## 7. 보안 및 인증

### 7.1 JWT 토큰 관리

#### 7.1.1 JWT 토큰 생성 및 검증

**시나리오**: 사용자 인증을 위한 JWT 토큰 처리 과정

**성공 시나리오**:

1. 사용자가 로그인에 성공한다
2. 시스템이 사용자 정보를 기반으로 JWT 토큰을 생성한다:
   - 사용자 ID
   - 사용자명
   - 역할 정보
   - 만료 시간
3. 토큰을 클라이언트에 반환한다
4. 이후 요청에서 토큰을 검증한다:
   - 토큰 서명 검증
   - 만료 시간 확인
   - 사용자 정보 추출

### 7.2 비밀번호 정책

#### 7.2.1 비밀번호 변경 정책

**시나리오**: 사용자가 비밀번호를 변경하는 과정에서의 정책 적용

**성공 시나리오**:

1. 사용자가 비밀번호 변경을 요청한다
2. 시스템이 현재 비밀번호를 확인한다
3. 새 비밀번호의 정책 준수를 확인한다:
   - 최소 6자, 최대 50자
   - 영문과 숫자 조합 필수
   - 특수문자 허용
4. 일일 변경 횟수 제한을 확인한다 (최대 3회)
5. 비밀번호 변경 이력을 기록한다
6. 새 비밀번호를 암호화하여 저장한다

#### 7.2.2 비밀번호 만료 정책

**시나리오**: 비밀번호 만료 알림 및 강제 변경 정책

**성공 시나리오**:

1. 시스템이 주기적으로 비밀번호 만료를 확인한다
2. 14일 이상 미변경 시 권장 알림을 표시한다
3. 30일 이상 미변경 시 강제 변경을 요구한다
4. 최초 로그인 시 비밀번호 변경을 요구한다

---

## 8. 데이터 처리 및 배치

### 8.1 CSV 파일 처리

#### 8.1.1 CSV 배치 처리

**시나리오**: 대용량 CSV 파일을 배치로 처리하는 과정

**성공 시나리오**:

1. 관리자가 CSV 파일을 업로드한다
2. 시스템이 파일 형식을 검증한다
3. 스케줄러가 설정된 시간에 배치 작업을 시작한다
4. 시스템이 CSV 파일을 읽어 데이터를 처리한다:
   - 데이터 유효성 검증
   - 중복 데이터 확인
   - 변환 및 정규화
5. 처리된 데이터를 데이터베이스에 저장한다
6. 배치 처리 이력을 기록한다
7. 처리 결과 보고서를 생성한다

### 8.2 외부 API 연동

#### 8.2.1 법인 정보 API 연동

**시나리오**: 외부 법인 정보 API를 통해 데이터를 수집하는 과정

**성공 시나리오**:

1. 시스템이 설정된 스케줄에 따라 API를 호출한다
2. 외부 API로부터 법인 정보를 조회한다
3. 응답 데이터를 파싱하고 유효성을 검증한다
4. 기존 데이터와 비교하여 변경사항을 확인한다
5. 새로운 데이터나 변경된 데이터를 업데이트한다
6. API 호출 이력과 결과를 로깅한다

---

## 9. 예외 상황 및 오류 처리

### 9.1 시스템 오류 처리

#### 9.1.1 데이터베이스 연결 오류

**시나리오**: 데이터베이스 연결이 실패하는 상황

**처리 과정**:

1. 시스템이 데이터베이스 연결 오류를 감지한다
2. 연결 재시도를 수행한다 (최대 3회)
3. 재시도 실패 시 사용자에게 적절한 오류 메시지를 표시한다
4. 관리자에게 알림을 발송한다
5. 헬스체크 상태를 업데이트한다

#### 9.1.2 외부 API 호출 실패

**시나리오**: 외부 API 호출이 실패하는 상황

**처리 과정**:

1. API 호출 시 타임아웃이나 오류가 발생한다
2. 재시도 정책에 따라 호출을 재시도한다
3. 최종 실패 시 fallback 메커니즘을 활성화한다
4. 오류 로그를 기록하고 관리자에게 알림한다

### 9.2 보안 위협 대응

#### 9.2.1 무차별 대입 공격 (Brute Force) 대응

**시나리오**: 동일 계정으로 반복적인 로그인 시도가 감지되는 상황

**대응 과정**:

1. 시스템이 단시간 내 반복 로그인 실패를 감지한다
2. 계정을 자동으로 잠금 처리한다
3. 해당 IP를 일시적으로 차단한다
4. 보안 로그에 기록한다
5. 관리자에게 알림을 발송한다

#### 9.2.2 Rate Limiting 위반 대응

**시나리오**: API 호출 한도를 초과하는 요청이 들어오는 상황

**대응 과정**:

1. Rate Limiting 시스템이 한도 초과를 감지한다
2. 해당 요청을 차단하고 429 응답을 반환한다
3. 위반 이력을 기록한다
4. 반복적인 위반 시 자동 차단을 적용한다

---

## 10. 운영 및 유지보수

### 10.1 로그 관리

#### 10.1.1 시스템 로그 수집

**시나리오**: 시스템 운영 중 발생하는 로그를 체계적으로 관리하는 과정

**처리 과정**:

1. 각 구성요소에서 로그를 생성한다:
   - 애플리케이션 로그
   - 보안 로그
   - 성능 로그
   - 오류 로그
2. 로그 레벨에 따라 분류한다 (ERROR, WARN, INFO, DEBUG)
3. 로그 로테이션을 수행한다
4. 중요한 로그는 별도로 보관한다

### 10.2 백업 및 복구

#### 10.2.1 데이터 백업

**시나리오**: 중요한 데이터를 정기적으로 백업하는 과정

**처리 과정**:

1. 스케줄러가 설정된 시간에 백업을 시작한다
2. 데이터베이스 전체를 덤프한다
3. 파일 시스템 데이터를 복사한다
4. 백업 파일을 검증한다
5. 백업 결과를 로깅하고 보고한다

---

이 유스케이스 시나리오 문서는 Antock Public Data Harvester 시스템의 모든 주요 기능과 사용자 상호작용을 포괄적으로 다루고 있습니다. 각 시나리오는 실제 구현된 코드를 바탕으로 작성되었으며, 시스템의 현재 아키텍처와 기능을 정확히 반영합니다.
